'use strict';if(typeof module!=='undefined'&&eval('typeof require')!=='undefined'&&'main'in eval('require')&&eval('typeof require.main')!=='undefined'){var ORIGINAL_MAIN_MODULE=module;if(module!==eval('require.main')&&'paths'in module&&'paths'in eval('require.main')&&typeof __dirname!=='undefined')module.paths=eval('require.main.paths').concat(module.paths.filter(function(path){return eval('require.main.paths').includes(path)}))};if(typeof window==='undefined')var window=typeof global==='undefined'?{}:global;!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@babel/runtime/helpers/defineProperty"),require("@babel/runtime/helpers/assertThisInitialized"),require("@babel/runtime/regenerator"),require("@babel/runtime/helpers/asyncToGenerator"),require("@babel/runtime/helpers/inheritsLoose"),require("clientnode")):"function"==typeof define&&define.amd?define("internationalisation",["@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/assertThisInitialized","@babel/runtime/regenerator","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/helpers/inheritsLoose","clientnode"],t):"object"==typeof exports?exports.internationalisation=t(require("@babel/runtime/helpers/defineProperty"),require("@babel/runtime/helpers/assertThisInitialized"),require("@babel/runtime/regenerator"),require("@babel/runtime/helpers/asyncToGenerator"),require("@babel/runtime/helpers/inheritsLoose"),require("clientnode")):e.internationalisation=t(e["@babel/runtime/helpers/defineProperty"],e["@babel/runtime/helpers/assertThisInitialized"],e["@babel/runtime/regenerator"],e["@babel/runtime/helpers/asyncToGenerator"],e["@babel/runtime/helpers/inheritsLoose"],e.clientnode)}(window,function(e,t,n,o,r,a){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";n.r(t),n.d(t,"$",function(){return g}),n.d(t,"Language",function(){return m});var o=n(2),r=n.n(o),a=n(3),i=n.n(a),s=n(1),l=n.n(s),u=n(4),c=n.n(u),p=n(0),d=n.n(p),h=n(5),g=h.$,m=function(e){function t(){for(var t,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,d()(l()(t),"currentLanguage",void 0),d()(l()(t),"knownTranslations",void 0),d()(l()(t),"_$domNodeToFade",void 0),d()(l()(t),"_replacements",void 0),d()(l()(t),"_textNodesWithKnownTranslation",void 0),t}c()(t,e);var n=t.prototype;return n.initialize=function(t,n,o,r,a,i){var s=this;void 0===t&&(t={}),void 0===n&&(n=""),void 0===o&&(o={}),void 0===r&&(r=null),void 0===a&&(a=[]),void 0===i&&(i={}),this.currentLanguage=n,this.knownTranslation=o,this._$domNodeToFade=r,this._replacements=a,this._textNodesWithKnownTranslation=i,this._options={domNodeSelectorPrefix:"body",default:"enUS",selection:[],initial:null,templateDelimiter:{pre:"{{",post:"}}"},fadeEffect:!0,textNodeParent:{showAnimation:[{opacity:1},{duration:"fast"}],hideAnimation:[{opacity:0},{duration:"fast"}]},preReplacementLanguagePattern:"^\\|({1})$",replacementLanguagePattern:"^([a-z]{2}[A-Z]{2}):((.|\\s)*)$",currentLanguagePattern:"^[a-z]{2}[A-Z]{2}$",replacementDomNodeName:["#comment","langreplacement"],replaceDomNodeNames:["#text","langreplace"],toolsLockDescription:"{1}Switch",languageHashPrefix:"language-",currentLanguageIndicatorClassName:"current",sessionDescription:"{1}",languageMapping:{deDE:["de","de_de","de-de","german","deutsch"],enUS:["en","en_us","en-us"],enEN:["en_en","en-en","english"],frFR:["fr","fr_fr","fr-fr","french"]},onSwitched:this.constructor.noop,onEnsured:this.constructor.noop,onSwitch:this.constructor.noop,onEnsure:this.constructor.noop,domNode:{knownTranslation:"div.toc"}},e.prototype.initialize.call(this,t),this._options.preReplacementLanguagePattern=this.constructor.stringFormat(this._options.preReplacementLanguagePattern,this._options.replacementLanguagePattern.substr(1,this._options.replacementLanguagePattern.length-2)),this._options.toolsLockDescription=this.constructor.stringFormat(this._options.toolsLockDescription,this.constructor.name),this._options.sessionDescription=this.constructor.stringFormat(this._options.sessionDescription,this.constructor.name),this.$domNodes=this.grabDomNode(this._options.domNode),this.$domNodes.switchLanguageButtons=g('a[href^="#'+this._options.languageHashPrefix+'"]'),this._movePreReplacementNodes(),this.currentLanguage=this._normalizeLanguage(this._options.default);var l=this._determineUsefulLanguage();return this.on(this.$domNodes.switchLanguageButtons,"click",function(e){return e.preventDefault(),s.switch(g(e.target).attr("href").substr(s._options.languageHashPrefix.length+1))}),this.currentLanguage===l?g.when(this._switchCurrentLanguageIndicator(l)):this.switch(l,!0)},n.switch=function(e,t){var n=this;return void 0===t&&(t=!1),!0!==e&&this._options.selection.length&&!this._options.selection.includes(e)?(this.debug('"{1}" isn\'t one of the allowed languages.',e),g.when(this)):this.acquireLock(this._options.toolsLockDescription,function(){if(!0===e?(t=!0,e=n.currentLanguage):e=n._normalizeLanguage(e),t&&e!==n._options.default||n.currentLanguage!==e){var o="Switch to";t&&(o="Ensure"),n.debug('{1} "{2}".',o,e),n._switchCurrentLanguageIndicator(e),n.fireEvent(t?"ensure":"switch",!0,n,n.currentLanguage,e),n._$domNodeToFade=null,n._replacements=[];var r=n._collectTextNodesToReplace(e,t),a=r[0],i=r[1];return n._ensureLastTextNodeHavingLanguageIndicator(a,i,t),n._handleSwitchEffect(e,t)}return n.debug('"{1}" is already current selected language.',e),n.releaseLock(n._options.toolsLockDescription),g.when(n)})},n.refresh=function(){return this._movePreReplacementNodes().switch(!0)},n._handleSwitchEffect=function(){var e=i()(r.a.mark(function e(t,n){var o,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.currentLanguage,n||!this._options.fadeEffect||!this._$domNodeToFade){e.next=12;break}return e.next=4,(a=this._$domNodeToFade).animate.apply(a,this._options.textNodeParent.hideAnimation).promise();case 4:if(this._switchLanguage(t),!this._$domNodeToFade){e.next=11;break}return e.next=8,(i=this._$domNodeToFade).animate.apply(i,this._options.textNodeParent.showAnimation).promise();case 8:return e.next=10,this.fireEvent(n?"ensured":"switched",!0,this,o,t);case 10:this.releaseLock(this._options.toolsLockDescription);case 11:return e.abrupt("return",this);case 12:return this._switchLanguage(t),e.next=15,this.fireEvent(n?"ensured":"switched",!0,this,o,t);case 15:return this.releaseLock(this._options.toolsLockDescription),e.abrupt("return",this);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._movePreReplacementNodes=function(){var e=this;return this.$domNodes.parent.find(":not(iframe)").contents().each(function(){var t=g(this),n=t.prop("nodeName").toLowerCase();if(e._options.replacementDomNodeName.includes(n)){["#comment","#text"].includes(n)||t.hide();var o=new RegExp(e._options.preReplacementLanguagePattern),r=t.prop("textContent").match(o);if(r&&r[0]){t.prop("textContent",t.prop("textContent").replace(o,r[1]));var a=!1;t.parent().contents().each(function(){return a&&g(this).Tools("text").trim()?(t.appendTo(this),!1):void(t[0]===this&&(a=!0))})}}}),this},n._collectTextNodesToReplace=function(e,t){var n=null,o=null,r=null,a=null;this.knownTranslation={};var i=this;return this.$domNodes.parent.find(":not(iframe)").contents().each(function(){var s=g(this),l=s.prop("nodeName").toLowerCase();if(i._options.replaceDomNodeNames.includes(l.toLowerCase()))s.Tools("text").trim()&&0===s.parents(i._options.replaceDomNodeNames.join()).length&&(a=i._ensureLastTextNodeHavingLanguageIndicator(r,a,t),n=s);else if(n){if(i._options.replacementDomNodeName.includes(l)){var u=s.prop("textContent");"#comment"!==l&&(u=s.html());var c=u.match(new RegExp(i._options.replacementLanguagePattern));return Array.isArray(c)&&c[1]===e?(i.knownTranslation[n.Tools("text").trim()]=c[2].trim(),i._registerTextNodeToChange(n,s,c,o),r=n,a=o,n=null,o=null):s.prop("textContent").match(new RegExp(i._options.currentLanguagePattern))&&(o=s),!0}r=null,a=null,n=null,o=null}}),this._registerKnownTextNodes(),[r,a]},n._registerKnownTextNodes=function(){this._textNodesWithKnownTranslation={};var e=this;return this.$domNodes.knownTranslation.find(":not(iframe)").contents().each(function(){var t=g(this);!e._options.replaceDomNodeNames.includes(t.prop("nodeName").toLowerCase())&&t.Tools("text").trim()&&0===t.parents(e._options.replaceDomNodeNames.join()).length&&e.knownTranslation.hasOwnProperty(t.Tools("text").trim())&&(e._addTextNodeToFade(t),e._textNodesWithKnownTranslation[e.knownTranslation[t.prop("textContent").trim()]]=e._textNodesWithKnownTranslation.hasOwnProperty(e.knownTranslation[t.prop("textContent").trim()])?e._textNodesWithKnownTranslation[e.knownTranslation[t.prop("textContent").trim()]].add(t):t)}),this},n._normalizeLanguage=function(e){for(var t in this._options.languageMapping)if(this._options.languageMapping.hasOwnProperty(t)&&(this._options.languageMapping[t].includes(t.toLowerCase())||this._options.languageMapping[t].push(t.toLowerCase()),this._options.languageMapping[t].includes(e.toLowerCase())))return t;return this._options.default},n._determineUsefulLanguage=function(){var e;return this._options.initial?e=this._options.initial:"localStorage"in g.global&&g.global.localStorage&&g.global.localStorage.getItem(this._options.sessionDescription)?(e=g.global.localStorage.getItem(this._options.sessionDescription),this.debug('Determine "{1}", because of local storage information.',e)):"navigator"in g.global&&g.global.navigator&&g.global.navigator.language?(e=g.global.navigator.language,this.debug('Determine "{1}", because of browser settings.',e)):(e=this._options.default,this.debug('Determine "{1}", because of default option.',e)),e=this._normalizeLanguage(e),this._options.selection.length&&!this._options.selection.includes(e)&&(this.debug('"{1}" isn\'t one of the allowed languages. Set language to "{2}".',e,this._options.selection[0]),e=this._options.selection[0]),"localStorage"in g.global&&g.global.localStorage.setItem(this._options.sessionDescription,e),e},n._addTextNodeToFade=function(e){var t=e.parent();return this._$domNodeToFade=this._$domNodeToFade?this._$domNodeToFade.add(t):t,this},n._registerTextNodeToChange=function(e,t,n,o){return this._addTextNodeToFade(e),t&&this._replacements.push({$textNodeToTranslate:e,$nodeToReplace:t,textToReplace:n[2],$currentLanguageDomNode:o}),this},n._ensureLastTextNodeHavingLanguageIndicator=function(e,t,n){if(e&&!t){var o=this.currentLanguage;n&&(o=this._options.default),t=g("\x3c!--"+o+"--\x3e"),e.after(t)}return t},n._switchLanguage=function(e){var t=this,n=function(){if(r){if(a>=o.length)return"break";i=o[a++]}else{if((a=o.next()).done)return"break";i=a.value}var n=i,s=n.$textNodeToTranslate.html();"#text"===n.$textNodeToTranslate.prop("nodeName")&&(s=n.$textNodeToTranslate.prop("textContent"));var l=s.trim();if(!t._options.templateDelimiter||!l.endsWith(t._options.templateDelimiter.post)&&t._options.templateDelimiter.post){var u=n.$currentLanguageDomNode;if(!n.$currentLanguageDomNode){u=g("body");var c=!1;n.$textNodeToTranslate.parent().contents().each(function(){return c?(n.$currentLanguageDomNode=u=g(this),!1):void(this===n.$textNodeToTranslate[0]&&(c=!0))})}var p=u.prop("textContent");e===p&&t.warn('Text node "'+n.textToReplace+'" is marked as "'+p+'" and has same translation language as it already is.');var d=n.$nodeToReplace.prop("nodeName").toLowerCase();"#comment"===d?n.$textNodeToTranslate.after(g("\x3c!--"+p+":"+s+"--\x3e")):n.$textNodeToTranslate.after(g("<"+d+">"+p+":"+s+"</"+d+">").hide()),n.$textNodeToTranslate.after(g("\x3c!--"+e+"--\x3e")),"#text"===n.$textNodeToTranslate.prop("nodeName")?n.$textNodeToTranslate.prop("textContent",n.textToReplace):n.$textNodeToTranslate.html(n.textToReplace),u.remove(),n.$nodeToReplace.remove()}},o=this._replacements,r=Array.isArray(o),a=0;for(o=r?o:o[Symbol.iterator]();;){var i;if("break"===n())break}for(var s in this._textNodesWithKnownTranslation)this._textNodesWithKnownTranslation.hasOwnProperty(s)&&this._textNodesWithKnownTranslation[s].prop("textContent",s);return"localStorage"in g.global&&g.global.localStorage.setItem(this._options.sessionDescription,e),this.currentLanguage=e,this},n._switchCurrentLanguageIndicator=function(e){return g('a[href="#'+this._options.languageHashPrefix+this.currentLanguage+'"].'+this._options.currentLanguageIndicatorClassName).removeClass(this._options.currentLanguageIndicatorClassName),g('a[href="#'+this._options.languageHashPrefix+e+'"]').addClass(this._options.currentLanguageIndicatorClassName),this},t}(g.Tools.class);d()(m,"_name","Language"),t.default=m,g.Language=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.Tools().controller(m,t)},g.Language.class=m}])});